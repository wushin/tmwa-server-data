// See #TravelConfig
function|script|WarpTowel|,
{
    if (TowelLastUsed > (gettimetick(2) - 3600))
        goto L_DontPanic;
    if (isin("botcheck.gat",25,27,51,47))
        goto L_Prison;
    if (isin("052-1.gat",1,1,100,80) || isin("052-2.gat",1,1,150,100))
        goto L_Illia;
    if (isin("029-3.gat",1,1,99,99))
        goto L_Candor;
    if (isin("031-4.gat",1,1,90,90))
        goto L_Cindy;

    // Cities Only
    set TowelLastUsed, gettimetick(2);
    warp getsavepoint(0),getsavepoint(1),getsavepoint(2);
    goto L_Keep;

L_Candor:
    message strcharinfo(0), "This area is protected by a force that doesn't tolerate the forgein powers of the towel.";
    goto L_Keep;

L_Cindy:
    message strcharinfo(0), "Something is preventing your towel from working here.";
    goto L_Keep;

L_Illia:
    message strcharinfo(0), "The strong barrier of this island prevents you to teleport!";
    goto L_Keep;

L_Prison:
    message strcharinfo(0), "You must be warped by a GM to leave the botcheck area.";
    goto L_Keep;

L_DontPanic:
    message strcharinfo(0), "Your towel is still to low on power to jump again.";
    goto L_Keep;

L_NotSet:
    message strcharinfo(0), "Your towel has been reset, please bind it to one of the towns.";
    goto L_Keep;

L_Keep:
    getitem "HitchhikersTowel", 1;
    end;
}
