// Spawns mobs

019-1.gat,0,0,0|script|SpawnManager019_1|-1,
{
    end; // just to be secure
OnCommandXmasSpawn:
OnInit:
    set $@019_1_SANTASLIME_MONSTER_MAX_NUMBER,15;
    set $@019_1_SANTASLIME_MOMSTER_ID,1015;
    set $@019_1_SANTASLIME_MONSTER_SPAWN_X1,32;
    set $@019_1_SANTASLIME_MONSTER_SPAWN_Y1,31;
    set $@019_1_SANTASLIME_MONSTER_SPAWN_X2,111;
    set $@019_1_SANTASLIME_MONSTER_SPAWN_Y2,101;
    if($@xmas_time)
        goto L_Init_Spawn;
    goto L_StopTracking;

L_Init_Spawn:
    initnpctimer;
    areamonster "019-1.gat", $@019_1_SANTASLIME_MONSTER_SPAWN_X1, $@019_1_SANTASLIME_MONSTER_SPAWN_Y1, $@019_1_SANTASLIME_MONSTER_SPAWN_X2, $@019_1_SANTASLIME_MONSTER_SPAWN_Y2, "Santa Slime", $@019_1_SANTASLIME_MOMSTER_ID, $@019_1_SANTASLIME_MONSTER_MAX_NUMBER, "SpawnManager::OnMonsterDeath";
    set $@monster_number,$@019_1_SANTASLIME_MONSTER_MAX_NUMBER;
    end;

L_Spawn:
    initnpctimer;
    areamonster "019-1.gat", $@019_1_SANTASLIME_MONSTER_SPAWN_X1, $@019_1_SANTASLIME_MONSTER_SPAWN_Y1, $@019_1_SANTASLIME_MONSTER_SPAWN_X2, $@019_1_SANTASLIME_MONSTER_SPAWN_Y2, "Santa Slime", $@019_1_SANTASLIME_MOMSTER_ID, 1, "SpawnManager::OnMonsterDeath";
    set $@019_1_SANTASLIME_monster_number,$@019_1_SANTASLIME_monster_number+1;
    end;

OnTimer20000:
    if($@xmas_time)
        goto L_Spawn;
    goto L_StopTracking;

L_StopTracking:
    stopnpctimer;
    disablenpc "SpawnManager019_1";
    end;

OnMonsterDeath:
    set $@019_1_SANTASLIME_monster_number,$@019_1_SANTASLIME_monster_number-1;
    end;
}
