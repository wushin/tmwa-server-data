// This file is part of Christmas Event 
// author: Jenalya, Chayenne, cinderweb, wushin
// please see #XmasConfig

function|script|XmasHelperPoints|,
{
    set @xmas_helper_count, 0;
    set @xmas_helper_loop, 0;

L_Loop:
    if(XMASTIME & $@helper_list[@xmas_helper_loop])
        goto L_AddOne;
    goto L_LoopAgain;

L_AddOne:
    set @xmas_helper_count, (@xmas_helper_count + 1);
    goto L_LoopAgain;

L_LoopAgain:
    if(@xmas_helper_loop == getarraysize($@helper_list))
        goto L_HelperTally;
    set @xmas_helper_loop, (@xmas_helper_loop + 1);
    goto L_Loop;

L_HelperTally:
    if(@xmas_helper_count == $@perfect_helpers_count)
        goto L_PerfectHelpers;
    if(@xmas_helper_count > $@required_helpers_count)
        goto L_HelperDone;
    goto L_Return;

L_PerfectHelpers:
    set XMASTIME, XMASTIME | $@all_helpers_bit;
    goto L_Return;

L_SetHelperState:
    set @xmas_state, $@xmas_helper_done_state;
    callfunc "XmasSetState";
    goto L_Return;

L_Return:
    set @xmas_helper_count, 0;
    set @xmas_helper_loop, 0;
    return;
}

function|script|Helper|,
{
    // Make Helpers static functions
    end;
}
