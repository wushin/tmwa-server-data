// This file is part of Christmas Event 
// author: Jenalya, Chayenne, cinderweb, wushin
// please see #XmasConfig

function|script|XmasStates|,
{
    if(XMASYEAR == $@xmas_time_key)
        goto L_Complete;
    // Check for Old Quest Line Keys. Reset Quest if so.
    callfunc "XmasCheckOld";
    // Main Quest
    set @xmas_state, ((XMASTIME & NIBBLE_0_MASK) >> NIBBLE_0_SHIFT);
    set @xmas_karma, ((XMASTIME & NIBBLE_1_MASK) >> NIBBLE_1_SHIFT);
    set @xmas_side, XMASTIME | $@xmas_side_bit;
    // Basement Passage
    set @basement_passage, XMASTIME & $@basement_passage;
    // Thrown Out
    set @xmas_thrown_out, XMASTIME & $@xmas_thrown_out_bit;
    // Boss Door State
    set @boss_door_state, (@xmas_state >= $@boss_door_open_state);
    // Santas Helper
    set @sh_sweater, XMASTIME & $@sh_bit_sweater;
    set @sh_cap, XMASTIME & $@sh_bit_cap;
    // List Quest
    set @xmas_gather_list, (@xmas_state == $@xmas_gather_list_state);
    set @all_lists, XMASTIME & $@all_lists_bit;
    // Helper Quest
    set @helper_done_state, (@xmas_state == $@xmas_helper_done_state);
    set @helper_bit, XMASTIME & $@main_helper_bit;
    set @all_helpers, XMASTIME & $@all_helpers_bit;
    // Acorns
    set @helper_acorn, XMASTIME & $@helper_bit_acorns;
    // Bedding
    set @helper_bedding, XMASTIME & $@helper_bit_bed_starts;
    // Glitter
    set @helper_glitter, XMASTIME & $@helper_bit_glitter_starts;
    // Storage
    set @helper_storage, XMASTIME & $@helper_bit_storage;
    return;

L_Complete:
    set XMASTIME, $@xmas_time_key;
    return;
}
